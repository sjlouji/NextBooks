{"ast":null,"code":"import axios from 'axios';\nimport { ACCOUNTS_LOADED, ACCOUNTS_LOADING, ACCOUNT_CREATED, ACCOUNT_DELETED } from './types';\nconst api = axios.create({\n  baseURL: `http://localhost:8000`\n}); //  Load Accounts \n\nexport const loadAccount = () => (dispatch, getState) => {\n  dispatch({\n    type: ACCOUNTS_LOADING\n  });\n  api.get(`/account/`, tokenConfig(getState)).then(res => {\n    dispatch({\n      type: ACCOUNTS_LOADED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n}; //  Add a new Account\n\nexport const addAccount = (account_id, account_name, account_type, initialBalance, account_provider) => (dispatch, getState) => {\n  // Request Body\n  const body = JSON.stringify({\n    account_id,\n    account_name,\n    account_type,\n    initialBalance,\n    account_provider\n  });\n  console.log(body);\n  api.post(`/account/create`, body, tokenConfig(getState)).then(res => {\n    console.log(res.data);\n    dispatch({\n      type: ACCOUNT_CREATED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n}; //  Delete a Account\n\nexport const deleteAccount = id => (dispatch, getState) => {\n  // Request Body\n  const body = JSON.stringify({\n    id\n  });\n  console.log(body);\n  api.post(`/account/delete`, body, tokenConfig(getState)).then(res => {\n    console.log(res.data);\n    dispatch({\n      type: ACCOUNT_DELETED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n}; // Setup config with token - helper function\n\nexport const tokenConfig = getState => {\n  const token = getState().auth.token;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["/Users/joan/Documents/Louji/Project/nextbooks/web/Book/src/Store/Action/account.js"],"names":["axios","ACCOUNTS_LOADED","ACCOUNTS_LOADING","ACCOUNT_CREATED","ACCOUNT_DELETED","api","create","baseURL","loadAccount","dispatch","getState","type","get","tokenConfig","then","res","payload","data","catch","err","console","log","addAccount","account_id","account_name","account_type","initialBalance","account_provider","body","JSON","stringify","post","deleteAccount","id","token","auth","config","headers"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n    ACCOUNTS_LOADED,\n    ACCOUNTS_LOADING,\n    ACCOUNT_CREATED,\n    ACCOUNT_DELETED\n} from './types';\n\n\nconst api = axios.create({\n  baseURL: `http://localhost:8000`\n})\n\n//  Load Accounts \nexport const loadAccount = () => (dispatch, getState) => {\n  dispatch({ type: ACCOUNTS_LOADING });\n  api\n    .get(`/account/`, tokenConfig(getState))\n    .then((res) => {\n      dispatch({\n        type: ACCOUNTS_LOADED,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n        console.log(err)\n    });\n};\n\n//  Add a new Account\nexport const addAccount = (account_id, account_name, account_type, initialBalance, account_provider) => (dispatch, getState) => {\n\n    // Request Body\n    const body = JSON.stringify({ account_id,account_name, account_type, initialBalance, account_provider });\n    console.log(body)\n    api\n      .post(`/account/create`, body ,tokenConfig(getState))\n      .then((res) => {\n        console.log(res.data)\n        dispatch({\n          type: ACCOUNT_CREATED,\n          payload: res.data,\n        });\n      })\n      .catch((err) => {\n          console.log(err)\n      });\n};\n\n//  Delete a Account\nexport const deleteAccount = (id) => (dispatch, getState) => {\n\n    // Request Body\n    const body = JSON.stringify({ id });\n    console.log(body)\n    api\n      .post(`/account/delete`, body ,tokenConfig(getState))\n      .then((res) => {\n        console.log(res.data)\n        dispatch({\n          type: ACCOUNT_DELETED,\n          payload: res.data,\n        });\n      })\n      .catch((err) => {\n          console.log(err)\n      });\n};\n\n// Setup config with token - helper function\nexport const tokenConfig = (getState) => {\n  const token = getState().auth.token;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  return config;\n};"]},"metadata":{},"sourceType":"module"}